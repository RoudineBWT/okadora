# Okadora migration and setup recipes

# Migrate existing user to Okadora (copy Niri/Noctalia configs)
migrate-to-okadora:
    #!/usr/bin/bash
    echo "ğŸš€ Migrating your user to Okadora configuration..."
    
    # Copier les configs Niri
    if [ -d "/etc/skel/.config/niri" ]; then
        if [ ! -d "$HOME/.config/niri" ]; then
            echo "ğŸ“¦ Installing Niri configuration..."
            mkdir -p "$HOME/.config"
            cp -r /etc/skel/.config/niri "$HOME/.config/"
            echo "âœ… Niri config installed"
        else
            echo "âš ï¸  Niri config already exists, skipping"
            read -p "Do you want to overwrite it? (y/N): " -n 1 -r
            echo
            if [[ $REPLY =~ ^[Yy]$ ]]; then
                cp -rf /etc/skel/.config/niri "$HOME/.config/"
                echo "âœ… Niri config overwritten"
            fi
        fi
    fi
    
    # Copier les configs Noctalia
    if [ -d "/etc/skel/.config/noctalia" ]; then
        if [ ! -d "$HOME/.config/noctalia" ]; then
            echo "ğŸ“¦ Installing Noctalia configuration..."
            mkdir -p "$HOME/.config"
            cp -r /etc/skel/.config/noctalia "$HOME/.config/"
            echo "âœ… Noctalia config installed"
        else
            echo "âš ï¸  Noctalia config already exists, skipping"
            read -p "Do you want to overwrite it? (y/N): " -n 1 -r
            echo
            if [[ $REPLY =~ ^[Yy]$ ]]; then
                cp -rf /etc/skel/.config/noctalia "$HOME/.config/"
                echo "âœ… Noctalia config overwritten"
            fi
        fi
    fi
    
    # Copier autres configs importantes
    if [ -d "/etc/skel/.config/fish" ]; then
        if [ ! -d "$HOME/.config/fish" ]; then
            echo "ğŸ“¦ Installing Fish configuration..."
            mkdir -p "$HOME/.config"
            cp -r /etc/skel/.config/fish "$HOME/.config/"
            echo "âœ… Fish config installed"
        fi
    fi
    
    # Marquer comme migrÃ©
    mkdir -p "$HOME/.config/okadora"
    touch "$HOME/.config/okadora/migrated"
    
    echo ""
    echo "âœ¨ Migration complete! Please log out and back in for changes to take effect."
    echo "ğŸ’¡ Tip: Set Niri as your default session at the login screen."

# Force reinstall all configs (overwrites existing)
reinstall-okadora-configs:
    #!/usr/bin/bash
    echo "âš ï¸  WARNING: This will OVERWRITE your existing Niri/Noctalia configs!"
    read -p "Are you sure? (y/N): " -n 1 -r
    echo
    if [[ $REPLY =~ ^[Yy]$ ]]; then
        echo "ğŸ“¦ Reinstalling all Okadora configs..."
        
        if [ -d "/etc/skel/.config/niri" ]; then
            mkdir -p "$HOME/.config"
            cp -rf /etc/skel/.config/niri "$HOME/.config/"
            echo "âœ… Niri config reinstalled"
        fi
        
        if [ -d "/etc/skel/.config/noctalia" ]; then
            mkdir -p "$HOME/.config"
            cp -rf /etc/skel/.config/noctalia "$HOME/.config/"
            echo "âœ… Noctalia config reinstalled"
        fi
        
        if [ -d "/etc/skel/.config/fish" ]; then
            mkdir -p "$HOME/.config"
            cp -rf /etc/skel/.config/fish "$HOME/.config/"
            echo "âœ… Fish config reinstalled"
        fi
        
        mkdir -p "$HOME/.config/okadora"
        touch "$HOME/.config/okadora/migrated"
        
        echo "âœ¨ All configs reinstalled!"
    else
        echo "âŒ Cancelled."
    fi

# Show Okadora info
okadora-info:
    #!/usr/bin/bash
    echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
    echo "â•‘          ğŸŒ¸ Okadora Info ğŸŒ¸           â•‘"
    echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    echo ""
    echo "ğŸ“¦ Based on: Bazzite Gnome"
    echo "ğŸªŸ Window Manager: Niri (Wayland)"
    echo "ğŸ¨ Shell: Noctalia"
    echo "ğŸš Terminal Shell: Fish"
    echo ""
    echo "Available commands:"
    echo "  ujust migrate-to-okadora        - Install Okadora configs"
    echo "  ujust reinstall-okadora-configs - Reinstall all configs"
    echo "  ujust okadora-info              - Show this info"
    echo ""
    echo "ğŸ“š Documentation: https://github.com/RoudineBWT/okadora"